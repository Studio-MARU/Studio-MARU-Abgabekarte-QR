<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>STUDIO MARU 丸 | Portfolio</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
    
    <style>
        * { box-sizing: border-box; -webkit-font-smoothing: antialiased; }

        /* NEU: Verhindert das Wackeln/Scrollen auf mobilen Geräten (Rubber-Banding) */
        html, body {
            overscroll-behavior: none;
        }

        body {
            background-color: #FBFBFB;
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            color: #222222;
            min-height: 100dvh; /* Passt sich perfekt an die mobile Adressleiste an */
        }

        /* --- HOME BUTTON OBEN RECHTS --- */
        .home-btn {
            position: absolute;
            top: 25px;
            right: 25px;
            text-decoration: none;
            color: #666666;
            font-size: 13px;
            font-weight: 500;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            z-index: 100;
            transition: color 0.3s ease;
            touch-action: manipulation;
        }

        .home-btn:hover { color: #1A1A1A; }

        /* --- PROJEKT CONTAINER --- */
        .portfolio-wrapper {
            padding: 80px 0 40px; 
            max-width: 500px;
            margin: 0 auto;
            min-height: 100dvh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .project {
            display: none; 
            padding: 0 24px;
            animation: fadeIn 0.5s ease forwards;
        }

        .project.active {
            display: block; 
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* --- TYPOGRAFIE & "WEITERLESEN" --- */
        h2 {
            font-weight: 500;
            font-size: 24px;
            letter-spacing: 1px;
            margin-top: 0;
            margin-bottom: 12px;
            color: #1A1A1A;
        }

        /* NEU: Begrenzt den Text auf exakt 3 Zeilen */
        .desc {
            font-weight: 300;
            font-size: 15px;
            color: #666666;
            line-height: 1.6;
            margin-bottom: 5px; 
            display: -webkit-box;
            -webkit-line-clamp: 3; /* Magische Zeile: Genau 3 Zeilen! */
            -webkit-box-orient: vertical;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        /* Wird aktiv, wenn man auf "Weiterlesen" klickt */
        .desc.expanded {
            -webkit-line-clamp: unset;
        }

        /* NEU: Der Weiterlesen-Button */
        .read-more-btn {
            background: none;
            border: none;
            color: #1A1A1A;
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            font-weight: 500;
            text-decoration: underline;
            padding: 0;
            margin-bottom: 25px;
            cursor: pointer;
            display: none; /* Wird per JS nur eingeblendet, wenn der Text zu lang ist */
            touch-action: manipulation;
        }

        /* --- BILDER KARUSSELL --- */
        .carousel {
            display: flex;
            overflow-x: auto;
            scroll-snap-type: x mandatory; 
            gap: 16px;
            padding-bottom: 10px; 
            scrollbar-width: none; 
            -ms-overflow-style: none;
            position: relative;
        }
        
        .carousel::-webkit-scrollbar { display: none; }

        .carousel-item {
            flex: 0 0 85%; 
            aspect-ratio: 4 / 5; 
            border-radius: 8px;
            overflow: hidden;
            scroll-snap-align: center; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.06);
            position: relative;
        }

        .carousel-item img {
            width: 100%;
            height: 100%;
            object-fit: cover; 
            display: block;
        }

        /* --- INSTAGRAM PUNKTE (Dots) --- */
        .dots-container {
            display: flex;
            justify-content: center;
            gap: 6px;
            margin-top: 15px;
            margin-bottom: 25px;
            min-height: 6px; 
        }

        .dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background-color: #D9D9D9; 
            transition: all 0.3s ease;
        }

        .dot.active {
            background-color: #766F6E; 
            transform: scale(1.2); 
        }

        /* --- NAVIGATION (BLÄTTERN) --- */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            gap: 15px;
        }

        .nav-btn {
            flex: 1;
            padding: 16px;
            background-color: #766F6E;
            color: #FFFFFF;
            border: none;
            border-radius: 6px;
            font-family: 'Inter', sans-serif;
            font-size: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            touch-action: manipulation;
        }

        .nav-btn:hover {
            background-color: #5c5655;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.08);
        }

        .nav-btn:disabled {
            background-color: #EAEAEA;
            color: #A0A0A0;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
    </style>
</head>
<body>

    <a href="/" class="home-btn">Home</a>

    <div class="portfolio-wrapper">

        <div class="project active" id="projekt-1">
            <h2>Almis Berghotel</h2>
            <p class="desc">Entwicklung eines modernen Brandings und Briefpapiers, das die rustikale Tradition mit cleaner Eleganz verbindet. Wir haben uns besonders auf eine reduzierte Farbpalette fokussiert, um die Architektur des Hauses in den Vordergrund zu stellen. Jedes Detail, von der Visitenkarte bis hin zur Speisekarte, wurde mit größter Sorgfalt und einem Blick für das Wesentliche konzipiert.</p>
            <button class="read-more-btn" onclick="toggleText(this)">Weiterlesen</button>
            
            <div class="carousel" id="carousel-1">
                <div class="carousel-item">
                    <img src="https://images.unsplash.com/photo-1600880292203-757bb62b4baf?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Almis Design 1">
                </div>
                <div class="carousel-item">
                    <img src="https://images.unsplash.com/photo-1586075010923-2dd4570fb338?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Almis Design 2">
                </div>
            </div>

            <div class="dots-container" id="dots-1"></div>

            <div class="nav-buttons">
                <button class="nav-btn" disabled>Zurück</button>
                <button class="nav-btn" onclick="wechsleProjekt(1)">Nächstes Projekt</button>
            </div>
        </div>


        <div class="project" id="projekt-2">
            <h2>Kaffeehaus Wien</h2>
            <p class="desc">Neugestaltung der Speisekarten und Visitenkarten. Fokus auf hochwertige Haptik und minimalistische Typografie.</p>
            <button class="read-more-btn" onclick="toggleText(this)">Weiterlesen</button>
            
            <div class="carousel" id="carousel-2">
                <div class="carousel-item">
                    <img src="https://images.unsplash.com/photo-1559525839-b184a4d698c7?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Kaffeehaus 1">
                </div>
                <div class="carousel-item">
                    <img src="https://images.unsplash.com/photo-1497935586351-b67a49e012bf?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Kaffeehaus 2">
                </div>
                <div class="carousel-item">
                    <img src="https://images.unsplash.com/photo-1600612258847-19e917d84879?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Kaffeehaus 3">
                </div>
            </div>

            <div class="dots-container" id="dots-2"></div>

            <div class="nav-buttons">
                <button class="nav-btn" onclick="wechsleProjekt(-1)">Zurück</button>
                <button class="nav-btn" onclick="wechsleProjekt(1)">Nächstes Projekt</button>
            </div>
        </div>


        <div class="project" id="projekt-3">
            <h2>Architektur Studio</h2>
            <p class="desc">Ein puristisches Corporate Design, das dem Raum und der Form den Vortritt lässt. Reduktion auf das Wesentliche.</p>
            <button class="read-more-btn" onclick="toggleText(this)">Weiterlesen</button>
            
            <div class="carousel" id="carousel-3">
                <div class="carousel-item">
                    <img src="https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Architektur 1">
                </div>
            </div>

            <div class="dots-container" id="dots-3"></div>

            <div class="nav-buttons">
                <button class="nav-btn" onclick="wechsleProjekt(-1)">Zurück</button>
                <button class="nav-btn" disabled>Ende</button>
            </div>
        </div>

    </div>

    <script>
        let aktuellesProjektIndex = 0;
        const projekte = document.querySelectorAll('.project');
        let currentObserver = null; 

        document.addEventListener('DOMContentLoaded', () => {
            initPunkteForProject(0);
            checkWeiterlesen(0);
        });

        function wechsleProjekt(richtung) {
            projekte[aktuellesProjektIndex].classList.remove('active');
            if (currentObserver) currentObserver.disconnect();
            
            aktuellesProjektIndex = aktuellesProjektIndex + richtung;
            
            projekte[aktuellesProjektIndex].classList.add('active');
            
            initPunkteForProject(aktuellesProjektIndex);
            checkWeiterlesen(aktuellesProjektIndex);
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // --- NEU: Prüft ob der Text länger als 3 Zeilen ist ---
        function checkWeiterlesen(index) {
            const projektDiv = projekte[index];
            const desc = projektDiv.querySelector('.desc');
            const btn = projektDiv.querySelector('.read-more-btn');

            if (desc && btn) {
                // Setzt den Text erst mal wieder zurück auf 3 Zeilen
                desc.classList.remove('expanded');
                btn.textContent = "Weiterlesen";
                
                // Prüft im Hintergrund, ob der versteckte Text größer ist als die sichtbare Box
                if (desc.scrollHeight > desc.clientHeight + 2) {
                    btn.style.display = "inline-block"; // Button anzeigen
                } else {
                    btn.style.display = "none"; // Button verstecken (bei kurzen Texten)
                }
            }
        }

        // --- NEU: Klappt den Text aus und ein ---
        function toggleText(btn) {
            const desc = btn.previousElementSibling;
            desc.classList.toggle('expanded');
            
            if (desc.classList.contains('expanded')) {
                btn.textContent = "Weniger anzeigen";
            } else {
                btn.textContent = "Weiterlesen";
            }
        }

        // Magie für die Instagram-Punkte
        function initPunkteForProject(index) {
            const projektDiv = projekte[index];
            const carousel = projektDiv.querySelector('.carousel');
            const items = carousel.querySelectorAll('.carousel-item');
            const dotsContainer = projektDiv.querySelector('.dots-container');

            dotsContainer.innerHTML = '';

            if (items.length <= 1) return;

            items.forEach((_, i) => {
                const dot = document.createElement('div');
                dot.classList.add('dot');
                if (i === 0) dot.classList.add('active'); 
                dotsContainer.appendChild(dot);
            });

            currentObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const itemIndex = Array.from(items).indexOf(entry.target);
                        dotsContainer.querySelectorAll('.dot').forEach((d, dotIndex) => {
                           d.classList.toggle('active', dotIndex === itemIndex);
                        });
                    }
                });
            }, { 
                root: carousel, 
                threshold: 0.6 
            });

            items.forEach(item => currentObserver.observe(item));
        }
    </script>

</body>
</html>
